import{slicedToArray as e,toConsumableArray as o,defineProperty as n}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as r}from"react/jsx-runtime";import a from"classnames";import i,{forwardRef as t,useRef as s,useState as c,useMemo as l,useCallback as d}from"react";import m from"../../../hooks/useMergeRefs.js";import u from"./Accordion.module.scss.js";var p="monday-accordion";var f=t((function(t,f){var v=t.children,C=void 0===v?null:v,j=t.allowMultiple,b=void 0!==j&&j,g=t["data-testid"],h=void 0===g?p:g,x=t.defaultIndex,y=void 0===x?[]:x,A=t.className,O=void 0===A?"":A,k=t.id,E=s(null),I=m({refs:[f,E]}),N=c(y),M=e(N,2),P=M[0],_=M[1],w=l((function(){return i.Children.toArray(C)}),[C]),B=d((function(e){return P.includes(e)}),[P]),H=d((function(e){if(b){var n=o(P);if(B(e)){var r=n.indexOf(e);r>-1&&n.splice(r,1)}else n.push(e);_(n)}else B(e)?_([]):_([e])}),[B,P,b]),L=l((function(){return i.Children.map(w,(function(e,o){var r,t,s,c=Object.assign({},null==e?void 0:e.props),l=(r=o,s=k,(t=c).id?t.id:s?"".concat(s,"--item-").concat(r):"".concat(p,"--item-").concat(r));return i.cloneElement(e,Object.assign(Object.assign({},c),{id:l,onClickAccordionCallback:function(){H(o)},open:B(o),expandCollapseComponentClassName:a(u.accordionItemExpandCollapse,n({},u.accordionItemExpandCollapseLast,o===w.length-1))}))}))}),[w,k,B,H]);return r("div",Object.assign({ref:I,className:a(u.accordion,O),"data-testid":h,id:k},{children:w&&L}))}));export{f as default};
