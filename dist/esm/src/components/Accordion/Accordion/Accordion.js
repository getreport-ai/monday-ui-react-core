import{slicedToArray as o,toConsumableArray as e,defineProperty as n}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as a}from"react/jsx-runtime";import r from"classnames";import i,{forwardRef as t,useRef as c,useState as s,useMemo as l,useCallback as d}from"react";import m from"../../../hooks/useMergeRefs.js";import u from"./Accordion.module.scss.js";var p=t((function(t,p){var f=t.children,v=void 0===f?null:f,C=t.allowMultiple,j=void 0!==C&&C,b=t["data-testid"],g=void 0===b?"monday-accordion":b,h=t.defaultIndex,x=void 0===h?[]:h,y=t.className,A=void 0===y?"":y,O=t.id,k=c(null),E=m({refs:[p,k]}),I=s(x),N=o(I,2),M=N[0],P=N[1],_=l((function(){return i.Children.toArray(v)}),[v]),w=d((function(o){return M.includes(o)}),[M]),B=d((function(o){if(j){var n=e(M);if(w(o)){var a=n.indexOf(o);a>-1&&n.splice(a,1)}else n.push(o);P(n)}else w(o)?P([]):P([o])}),[w,M,j]),H=l((function(){return i.Children.map(_,(function(o,e){var a,t,c,s=Object.assign({},null==o?void 0:o.props),l=(a=e,c=O,(t=s).id?t.id:c?"".concat(c,"--item-").concat(a):"".concat("monday-accordion","--item-").concat(a));return i.cloneElement(o,Object.assign(Object.assign({},s),{id:l,onClickAccordionCallback:function(){B(e)},open:w(e),expandCollapseComponentClassName:r(u.accordionItemExpandCollapse,n({},u.accordionItemExpandCollapseLast,e===_.length-1))}))}))}),[_,O,w,B]);return a("div",Object.assign({ref:E,className:r(u.accordion,A),"data-testid":g,id:O},{children:_&&H}))}));export{p as default};
