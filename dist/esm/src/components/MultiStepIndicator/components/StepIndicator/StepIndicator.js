import{slicedToArray as e,toConsumableArray as t,defineProperty as i}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import{jsxs as n,jsx as s,Fragment as o}from"react/jsx-runtime";import{camelCase as a}from"lodash-es";import{getStyle as r}from"../../../../helpers/typesciptCssModulesHelper.js";import{getTestId as c,ComponentDefaultTestId as l}from"../../../../tests/test-ids-utils.js";import d from"classnames";import{keyCodes as p}from"../../../../constants/keyCodes.js";import{useState as m,useRef as u,useCallback as f,useEffect as v,useMemo as b}from"react";import{SwitchTransition as _,CSSTransition as y}from"react-transition-group";import j from"../../../../hooks/useKeyEvent/index.js";import x from"../../../Icon/Icon.js";import N from"../../../Icon/Icons/components/Check.js";import I from"../../../Divider/Divider.js";import{NOOP as C}from"../../../../utils/function-utils.js";import h from"../../../HiddenText/HiddenText.js";import S from"../../../Clickable/Clickable.js";import{StepStatus as T,MultiStepType as E,Size as g}from"../../MultiStepConstants.js";import k from"./StepIndicator.module.scss.js";import{IconType as A}from"../../../Icon/IconConstants.js";var O=[p.ENTER,p.SPACE],D=function(e){var t=e.fulfilledStepIcon,i=e.fulfilledStepIconType;return e.status!==T.FULFILLED||e.isFulfilledStepDisplayNumber?s(o,{children:e.stepNumber}):s(x,{icon:t,className:d(k.numberContainerTextCheckIcon),iconLabel:T.FULFILLED,iconType:i,ignoreFocusStyle:!0,clickable:!1,ariaHidden:!0})},L=function(o){var p,x=o.stepComponentClassName,L=o.stepNumber,F=void 0===L?1:L,P=o.status,w=void 0===P?T.PENDING:P,R=o.titleText,H=void 0===R?"Title text":R,M=o.subtitleText,G=void 0===M?"Subtitle text":M,U=o.type,V=void 0===U?E.PRIMARY:U,z=o.fulfilledStepIcon,B=void 0===z?N:z,K=o.fulfilledStepIconType,Y=void 0===K?A.SVG:K,q=o.isFulfilledStepDisplayNumber,J=void 0!==q&&q,Q=o.onClick,W=void 0===Q?C:Q,X=o.isFollowedByDivider,Z=void 0!==X&&X,$=o.stepDividerClassName,ee=o.isVertical,te=void 0!==ee&&ee,ie=o.id,ne=o.size,se=void 0===ne?g.REGULAR:ne,oe=o["data-testid"],ae=m(!1),re=e(ae,2),ce=re[0],le=re[1],de=u(null),pe=u(w),me=f((function(){le(!0)}),[le]),ue=f((function(){le(!1)}),[le]),fe=f((function(){return pe.current!==w}),[pe,w]),ve=f((function(){W&&W(F)}),[W,F]);j({eventName:"animationend",callback:ue,ref:de}),j({keys:O,callback:ve,ref:de}),v((function(){fe()&&me()}),[w,fe,me]),v((function(){pe.current=w}),[w]);var be=b((function(){return"Step ".concat(F,": ").concat(H," - ").concat(G,", status: ").concat(w)}),[w,H,F,G]),_e=function(e){return[r(k,a(e||"indicator")),r(k,a("type-".concat(V).concat(e))),r(k,a("status-".concat(w).concat(e))),r(k,a("size-".concat(se).concat(e)))]};return n(S,Object.assign({tabIndex:"-1",elementType:"li",className:d.apply(void 0,t(_e("")).concat([x,(p={},i(p,k.withAnimation,ce),i(p,k.clickable,W),i(p,k.textPlacementVertical,te),p)])),"aria-label":be,onClick:ve,dataTestId:oe||c(l.STEP_INDICATOR,ie)},{children:[n("div",Object.assign({className:d.apply(void 0,t(_e("__number-divider-container")))},{children:[s("div",Object.assign({className:d.apply(void 0,t(_e("__number-container"))),ref:de,tabIndex:0,role:"button"},{children:s(_,Object.assign({mode:"out-in"},{children:s(y,Object.assign({classNames:{enter:k.swapEnter,enterActive:k.swapEnterActive,exit:k.swapExit,exitActive:k.swapExitActive},addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)}},{children:s("span",Object.assign({className:d.apply(void 0,t(_e("__number-container__text")))},{children:s(D,{fulfilledStepIcon:B,fulfilledStepIconType:Y,isFulfilledStepDisplayNumber:J,stepNumber:F,status:w})}))}),w)}))})),Z&&te&&s(I,{className:d(k.divider,$)})]})),n("div",Object.assign({className:d.apply(void 0,t(_e("__text-container")))},{children:[n("div",Object.assign({className:d.apply(void 0,t(_e("__text-container__title")))},{children:[s(h,{text:w})," ",s("span",Object.assign({className:d.apply(void 0,t(_e("__text-container__title__text")))},{children:H}))]})),se!==g.COMPACT?s("span",Object.assign({className:d.apply(void 0,t(_e("__text-container__subtitle__text")))},{children:G})):null]}))]}))};export{L as default};
