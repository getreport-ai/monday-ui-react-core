import{slicedToArray as o,defineProperty as e}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as n}from"react/jsx-runtime";import r from"classnames";import{forwardRef as t,useState as i,useRef as a,useCallback as s,useLayoutEffect as u,useEffect as l}from"react";import c from"autosize";import d from"../../hooks/useStyle.js";import m from"../../hooks/useMergeRefs.js";import{isTabEvent as f,isEnterEvent as p,isEscapeEvent as v,isArrowUpEvent as E,isArrowDownEvent as T,isArrowLeftEvent as b,isArrowRightEvent as g}from"../../utils/dom-event-utils.js";import{InputType as A}from"./EditableInputConstants.js";import{getTestId as h,ComponentDefaultTestId as y}from"../../tests/testIds.js";import C from"./EditableInput.module.scss.js";var I=t((function(t,I){var j=t.className,x=t.inputType,_=void 0===x?A.INPUT:x,B=t.autoSize,P=void 0!==B&&B,R=t.id,w=t.tabIndex,D=t.autoComplete,F=void 0===D||D,K=t.disabled,L=void 0!==K&&K,k=t.maxLength,N=t.placeholder,S=void 0===N?"":N,X=t.onClick,z=t.onKeyPress,M=t.shouldFocusOnMount,O=void 0===M||M,H=t.selectOnMount,U=t.value,V=t.customColor,q=t.ignoreBlurClass,W=t.onFinishEditing,G=t.onIgnoreBlurEvent,J=t.onFocus,Q=t.onBlur,Y=t.isValidValue,Z=t.onChange,$=t.onError,oo=t.onSuccess,eo=t.onKeyDown,no=t.onTabHandler,ro=t.onCancelEditing,to=t.textareaSubmitOnEnter,io=void 0!==to&&to,ao=t.onArrowKeyDown,so=t.ariaLabel,uo=t["data-testid"],lo=i(U||""),co=o(lo,2),mo=co[0],fo=co[1],po=a(null),vo=m({refs:[I,po]}),Eo=s((function(){po.current&&P&&_===A.TEXT_AREA&&c(po.current)}),[po,P,_]),To=s((function(){po.current&&requestAnimationFrame((function(){var o;null===(o=po.current)||void 0===o||o.focus()}))}),[po]),bo=s((function(o){J&&J(o)}),[J]),go=s((function(o){if(n=q,(e=o.relatedTarget)&&n&&e.classList.contains(n))G(mo);else{var e,n,r=o;r.origin="blur",W&&W(mo,r),Q&&Q(r)}}),[q,mo,W,Q,G]),Ao=s((function(o){var e=o.target.value;!Y||Y(e)?(fo(e),Z&&Z(e),oo&&oo()):$&&$()}),[Y,Z,$,oo]),ho=s((function(){po.current&&po.current.select()}),[po]),yo=s((function(){po.current&&(po.current.value="",po.current.value=mo)}),[po,mo]),Co=s((function(o){return eo?eo(o,mo):no&&f(o)&&_!==A.TEXT_AREA?(o.preventDefault(),no(mo,o)):(W&&p(o)&&(_!==A.TEXT_AREA||io)&&W(mo,o),ro&&v(o)&&ro(o),void(ao&&(E(o)||T(o)||b(o)||g(o))&&ao(mo,o)))}),[eo,_,mo,no,io,W,ro,ao]);u((function(){O&&To(),Eo(),H?ho():yo()}),[]),l((function(){fo(U)}),[U]);var Io=d(void 0,{color:V}),jo=_===A.TEXT_AREA&&P?1:void 0;return n(_,{ref:vo,id:R,"data-testid":uo||h(y.EDITABLE_INPUT,R),style:Io,className:r(C.editableInputWrapper,j,e({},C.noResize,P)),onChange:Ao,onKeyDown:Co,onBlur:go,onFocus:bo,onClick:X,onKeyPress:z,value:mo,placeholder:S,dir:"auto",tabIndex:w,autoComplete:F?"on":"off",rows:jo,maxLength:k,"aria-label":so,disabled:L})}));export{I as default};
