import{slicedToArray as e,defineProperty as o}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as t,jsxs as i}from"react/jsx-runtime";import{forwardRef as r,useRef as n,useState as s,useMemo as a,useEffect as l,useCallback as c}from"react";import{camelCase as u}from"lodash-es";import d from"classnames";import p from"../../hooks/useResizeObserver.js";import m from"../../hooks/useMergeRefs.js";import{NOOP as f}from"../../utils/function-utils.js";import y from"../Icon/Icon.js";import b from"../Loader/Loader.js";import{ButtonType as g,ButtonColor as v,ButtonInputType as h,getActualSize as I,BUTTON_ICON_SIZE as C}from"./ButtonConstants.js";import{TRANSPARENT_COLOR as j,getParentBackgroundColorNotTransparent as O}from"./helper/dom-helpers.js";import{getTestId as T}from"../../tests/testIds.js";import{isIE11 as F}from"../../utils/user-agent-utils.js";import{withStaticProps as P}from"../../types/withStaticProps.js";import{ComponentDefaultTestId as k}from"../../tests/constants.js";import{backwardCompatibilityForProperties as N}from"../../helpers/backwardCompatibilityForProperties.js";import{getStyle as S}from"../../helpers/typesciptCssModulesHelper.js";import x from"./Button.module.scss.js";import{SIZES as M}from"../../constants/sizes.js";var R=F()?32:6,z=r((function(r,f){var h=r.className,j=r.children,F=r.kind,P=r.onClick,M=r.name,z=r.size,B=r.color,L=r.disabled,A=r.rightIcon,_=r.leftIcon,w=r.success,D=r.successText,U=r.successIcon,E=r.style,H=r.loading,Y=r.active,V=r.activeButtonClassName,q=r.id,G=r.marginRight,J=r.marginLeft,K=r.type,Q=r.onMouseDown,W=r.ariaLabel,X=r.rightFlat,Z=r.leftFlat,$=r.preventClickAnimation,ee=r.noSidePadding,oe=r.onFocus,te=r.onBlur,ie=r.ariaLabeledBy,re=r.defaultTextColorOnPrimaryColor,ne=r.ariaHasPopup,se=r.ariaExpanded,ae=r.ariaControls,le=r.blurOnMouseUp,ce=r.insetFocus,ue=r.tabIndex,de=N([r["data-testid"],r.dataTestId]),pe=n(null),me=s(!1),fe=e(me,2),ye=fe[0],be=fe[1],ge=a((function(){return function(e){var o=e.borderBoxSize,t=o.blockSize,i=Math.max(o.inlineSize,R),r=Math.max(t,R);pe.current&&(pe.current.style.setProperty("--element-width","".concat(i,"px")),pe.current.style.setProperty("--element-height","".concat(r,"px")),be(!0))}}),[pe]);p({ref:pe,callback:ge,debounceTime:200}),l((function(){if(B===v.ON_PRIMARY_COLOR&&F===g.PRIMARY&&pe.current){var e=pe.current;e.style.color=O(e,re)}}),[F,pe,B,re]);var ve=c((function(){var e=pe.current;!L&&e&&le&&e.blur()}),[L,pe,le]),he=c((function(e){L||H||w?e.preventDefault():P&&P(e)}),[P,L,H,w]),Ie=c((function(e){L||H||w?e.preventDefault():Q&&Q(e)}),[Q,L,H,w]),Ce=a((function(){var e,t=w?v.POSITIVE:B;return d(h,x.button,S(x,u("size-"+I(z))),S(x,u("kind-"+F)),S(x,u("color-"+t)),(o(e={},x.hasStyleSize,ye),o(e,x.loading,H),o(e,S(x,u("color-"+t+"-active")),Y),o(e,V,Y),o(e,x.marginRight,G),o(e,x.marginLeft,J),o(e,x.rightFlat,X),o(e,x.leftFlat,Z),o(e,x.preventClickAnimation,$),o(e,x.noSidePadding,ee),o(e,x.disabled,L),o(e,x.insetFocusStyle,ce),e))}),[w,B,h,z,F,ye,H,Y,V,G,J,X,Z,$,ee,L,ce]),je=m({refs:[f,pe]}),Oe=a((function(){return{ref:je,type:K,className:Ce,name:M,onMouseUp:ve,style:E,onClick:he,id:q,onFocus:oe,onBlur:te,tabIndex:ue,"data-testid":de||T(k.BUTTON,q),onMouseDown:Ie,"aria-disabled":L,"aria-busy":H,"aria-labelledby":ie,"aria-label":W,"aria-haspopup":ne,"aria-expanded":se,"aria-controls":ae,"aria-pressed":Y}}),[je,K,Ce,M,ve,E,he,q,oe,te,ue,de,Ie,L,H,ie,W,ne,se,ae,Y]),Te=a((function(){if("function"==typeof _)return C}),[_]),Fe=a((function(){if("function"==typeof A)return C}),[A]),Pe=a((function(){if("function"==typeof U)return C}),[U]);return H?t("button",Object.assign({},Oe,{children:t("span",Object.assign({className:x.loader},{children:t(b,{svgClassName:x.loaderSvg})}))})):i("button",Object.assign({},Oe,w?{children:[U?t(y,{iconType:null==y?void 0:y.type.ICON_FONT,clickable:!1,icon:U,iconSize:Pe,className:d(o({},x.leftIcon,!!D)),ignoreFocusStyle:!0}):null,D]}:{children:[_?t(y,{iconType:null==y?void 0:y.type.ICON_FONT,clickable:!1,icon:_,iconSize:Te,className:d(o({},x.leftIcon,!!j)),ignoreFocusStyle:!0}):null,j,A?t(y,{iconType:null==y?void 0:y.type.ICON_FONT,clickable:!1,icon:A,iconSize:Fe,className:d(o({},x.rightIcon,!!j)),ignoreFocusStyle:!0}):null]}))}));z.defaultProps={className:void 0,name:void 0,style:void 0,id:void 0,dataTestId:void 0,kind:g.PRIMARY,onClick:f,size:M.MEDIUM,color:v.PRIMARY,disabled:!1,rightIcon:null,leftIcon:null,success:!1,successText:"",successIcon:null,loading:!1,active:!1,marginRight:!1,marginLeft:!1,type:h.BUTTON,onMouseDown:f,rightFlat:!1,leftFlat:!1,preventClickAnimation:!1,noSidePadding:!1,onFocus:f,onBlur:f,defaultTextColorOnPrimaryColor:j,ariaHasPopup:void 0,blurOnMouseUp:!0,ariaExpanded:void 0,ariaControls:void 0,ariaLabel:void 0,ariaLabeledBy:void 0,insetFocus:!1};var B=P(z,{sizes:M,colors:v,kinds:g,types:h,inputTags:h});export{B as default};
