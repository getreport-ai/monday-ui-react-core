import{slicedToArray as e,defineProperty as o}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as t,jsxs as i}from"react/jsx-runtime";import{forwardRef as r,useRef as n,useState as a,useMemo as s,useEffect as l,useCallback as c}from"react";import{camelCase as u}from"lodash-es";import d from"classnames";import p from"../../hooks/useResizeObserver.js";import m from"../../hooks/useMergeRefs.js";import{NOOP as f}from"../../utils/function-utils.js";import y from"../Icon/Icon.js";import b from"../Loader/Loader.js";import{ButtonType as v,ButtonColor as g,ButtonInputType as h,getActualSize as I,BUTTON_ICON_SIZE as C}from"./ButtonConstants.js";import{TRANSPARENT_COLOR as O,getParentBackgroundColorNotTransparent as T}from"./helper/dom-helpers.js";import{getTestId as j}from"../../tests/test-ids-utils.js";import{withStaticProps as F}from"../../types/withStaticProps.js";import{ComponentDefaultTestId as P}from"../../tests/constants.js";import{backwardCompatibilityForProperties as k}from"../../helpers/backwardCompatibilityForProperties.js";import{getStyle as N}from"../../helpers/typesciptCssModulesHelper.js";import S from"./Button.module.scss.js";import{SIZES as x}from"../../constants/sizes.js";var M=r((function(r,f){var h=r.className,O=r.children,F=r.kind,x=r.onClick,M=r.name,R=r.size,z=r.color,B=r.disabled,L=r.rightIcon,A=r.leftIcon,_=r.success,w=r.successText,D=r.successIcon,U=r.style,E=r.loading,H=r.active,Y=r.activeButtonClassName,V=r.id,q=r.marginRight,G=r.marginLeft,J=r.type,K=r.onMouseDown,Q=r.ariaLabel,W=r.rightFlat,X=r.leftFlat,Z=r.preventClickAnimation,$=r.noSidePadding,ee=r.onFocus,oe=r.onBlur,te=r.ariaLabeledBy,ie=r.defaultTextColorOnPrimaryColor,re=r.ariaHasPopup,ne=r.ariaExpanded,ae=r.ariaControls,se=r.blurOnMouseUp,le=r.insetFocus,ce=r.tabIndex,ue=k([r["data-testid"],r.dataTestId]),de=n(null),pe=a(!1),me=e(pe,2),fe=me[0],ye=me[1],be=s((function(){return function(e){var o=e.borderBoxSize,t=o.blockSize,i=Math.max(o.inlineSize,6),r=Math.max(t,6);de.current&&(de.current.style.setProperty("--element-width","".concat(i,"px")),de.current.style.setProperty("--element-height","".concat(r,"px")),ye(!0))}}),[de]);p({ref:de,callback:be,debounceTime:200}),l((function(){if(z===g.ON_PRIMARY_COLOR&&F===v.PRIMARY&&de.current){var e=de.current;e.style.color=T(e,ie)}}),[F,de,z,ie]);var ve=c((function(){var e=de.current;!B&&e&&se&&e.blur()}),[B,de,se]),ge=c((function(e){B||E||_?e.preventDefault():x&&x(e)}),[x,B,E,_]),he=c((function(e){B||E||_?e.preventDefault():K&&K(e)}),[K,B,E,_]),Ie=s((function(){var e,t=_?g.POSITIVE:z;return d(h,S.button,N(S,u("size-"+I(R))),N(S,u("kind-"+F)),N(S,u("color-"+t)),(o(e={},S.hasStyleSize,fe),o(e,S.loading,E),o(e,N(S,u("color-"+t+"-active")),H),o(e,Y,H),o(e,S.marginRight,q),o(e,S.marginLeft,G),o(e,S.rightFlat,W),o(e,S.leftFlat,X),o(e,S.preventClickAnimation,Z),o(e,S.noSidePadding,$),o(e,S.disabled,B),o(e,S.insetFocusStyle,le),e))}),[_,z,h,R,F,fe,E,H,Y,q,G,W,X,Z,$,B,le]),Ce=m({refs:[f,de]}),Oe=s((function(){return{ref:Ce,type:J,className:Ie,name:M,onMouseUp:ve,style:U,onClick:ge,id:V,onFocus:ee,onBlur:oe,tabIndex:ce,"data-testid":ue||j(P.BUTTON,V),onMouseDown:he,"aria-disabled":B,"aria-busy":E,"aria-labelledby":te,"aria-label":Q,"aria-haspopup":re,"aria-expanded":ne,"aria-controls":ae,"aria-pressed":H}}),[Ce,J,Ie,M,ve,U,ge,V,ee,oe,ce,ue,he,B,E,te,Q,re,ne,ae,H]),Te=s((function(){if("function"==typeof A)return C}),[A]),je=s((function(){if("function"==typeof L)return C}),[L]),Fe=s((function(){if("function"==typeof D)return C}),[D]);return E?t("button",Object.assign({},Oe,{children:t("span",Object.assign({className:S.loader},{children:t(b,{svgClassName:S.loaderSvg})}))})):i("button",Object.assign({},Oe,_?{children:[D?t(y,{iconType:null==y?void 0:y.type.ICON_FONT,clickable:!1,icon:D,iconSize:Fe,className:d(o({},S.leftIcon,!!w)),ignoreFocusStyle:!0}):null,w]}:{children:[A?t(y,{iconType:null==y?void 0:y.type.ICON_FONT,clickable:!1,icon:A,iconSize:Te,className:d(o({},S.leftIcon,!!O)),ignoreFocusStyle:!0}):null,O,L?t(y,{iconType:null==y?void 0:y.type.ICON_FONT,clickable:!1,icon:L,iconSize:je,className:d(o({},S.rightIcon,!!O)),ignoreFocusStyle:!0}):null]}))}));M.defaultProps={className:void 0,name:void 0,style:void 0,id:void 0,dataTestId:void 0,kind:v.PRIMARY,onClick:f,size:x.MEDIUM,color:g.PRIMARY,disabled:!1,rightIcon:null,leftIcon:null,success:!1,successText:"",successIcon:null,loading:!1,active:!1,marginRight:!1,marginLeft:!1,type:h.BUTTON,onMouseDown:f,rightFlat:!1,leftFlat:!1,preventClickAnimation:!1,noSidePadding:!1,onFocus:f,onBlur:f,defaultTextColorOnPrimaryColor:O,ariaHasPopup:void 0,blurOnMouseUp:!0,ariaExpanded:void 0,ariaControls:void 0,ariaLabel:void 0,ariaLabeledBy:void 0,insetFocus:!1};var R=F(M,{sizes:x,colors:g,kinds:v,types:h,inputTags:h});export{R as default};
