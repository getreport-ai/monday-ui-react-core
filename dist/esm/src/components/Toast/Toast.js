import{defineProperty as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{__rest as o}from"../../../_virtual/_tslib.js";import{jsx as e,jsxs as i}from"react/jsx-runtime";import{camelCase as n}from"lodash-es";import{getTestId as r,ComponentDefaultTestId as s}from"../../tests/test-ids-utils.js";import c from"classnames";import{useMemo as a,useCallback as l,useRef as m,useEffect as u}from"react";import{CSSTransition as p}from"react-transition-group";import f from"../Button/Button.js";import d from"../Icon/Icon.js";import T from"../Text/Text.js";import j from"../Icon/Icons/components/CloseSmall.js";import v from"./ToastLink/ToastLink.js";import O from"./ToastButton/ToastButton.js";import{ToastType as N,ToastActionType as y}from"./ToastConstants.js";import{getIcon as b}from"./ToastHelpers.js";import{NOOP as h}from"../../utils/function-utils.js";import{getStyle as g}from"../../helpers/typesciptCssModulesHelper.js";import{withStaticProps as A}from"../../types/withStaticProps.js";import I from"./Toast.module.scss.js";var L=A((function(A){var L=A.open,x=void 0!==L&&L,B=A.autoHideDuration,R=void 0===B?null:B,S=A.type,_=void 0===S?N.NORMAL:S,k=A.icon,C=A.hideIcon,M=void 0!==C&&C,P=A.action,E=A.actions,H=A.children,z=A.closeable,Y=void 0===z||z,w=A.onClose,D=void 0===w?h:w,F=A.className,G=A.id,K=A["data-testid"],U=a((function(){return E?E.filter((function(t){return t.type===y.LINK})).map((function(t){var i=o(t,["type"]);return e(v,Object.assign({className:I.actionLink},i),i.href)})):null}),[E]),V=a((function(){return E?E.filter((function(t){return t.type===y.BUTTON})).map((function(t,i){var n=t.content,r=o(t,["type","content"]);return e(O,Object.assign({className:I.actionButton},r,{children:n}),"alert-button-".concat(i))})):null}),[E]),X=a((function(){return c(I.toast,g(I,n("type-"+_)),F)}),[_,F]),q=l((function(){D&&D()}),[D]),J=m(),Q=l((function(t){D&&null!=t&&(clearTimeout(J.current),J.current=setTimeout((function(){q()}),t))}),[q,D]);u((function(){return x&&R>0&&Q(R),function(){clearTimeout(J.current)}}),[x,R,Q]);var W=!M&&b(_,k);return e(p,Object.assign({in:x,classNames:{enterActive:I.enterActive,exitActive:I.exitActive},timeout:400,unmountOnExit:!0},{children:i(T,Object.assign({id:G,"data-testid":K||r(s.TOAST,G),type:T.types.TEXT2,element:"div",color:T.colors.ON_PRIMARY,className:X,role:"alert","aria-live":"polite"},{children:[W&&e("div",Object.assign({className:c(I.icon)},{children:W})),i("div",Object.assign({"data-testid":r(s.TOAST_CONTENT),className:c(I.content,t({},I.contentNoIcon,!W))},{children:[H,U]})),(V||P)&&e("div",Object.assign({className:c(I.action)},{children:V||P})),Y&&e(f,Object.assign({className:c(I.closeButton),onClick:q,size:f.sizes.SMALL,kind:f.kinds.TERTIARY,color:f.colors.ON_PRIMARY_COLOR,ariaLabel:"close-toast"},{children:e(d,{iconType:d.type.SVG,clickable:!1,icon:j,iconSize:"20px",ignoreFocusStyle:!0})}))]}))}))}),{types:N,actionTypes:y});export{L as default};
