import{slicedToArray as o,defineProperty as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as e,jsxs as i}from"react/jsx-runtime";import r,{useMemo as a,useCallback as l,cloneElement as n}from"react";import s from"react-dom";import d from"classnames";import{useA11yDialog as c}from"./a11yDialog.js";import m from"./ModalContent/ModalContent.js";import u from"./ModalHeader/ModalHeader.js";import f from"./useBodyScrollLock.js";import p from"./useShowHideModal.js";import{ModalWidth as v,validateTitleProp as g,isModalHeader as j,isModalContent as y,isModalFooter as L}from"./ModalHelper.js";import{NOOP as h}from"../../utils/function-utils.js";import{withStaticProps as D}from"../../types/withStaticProps.js";import{getTestId as M}from"../../tests/testIds.js";import{ComponentDefaultTestId as A}from"../../tests/constants.js";import b from"./Modal.module.scss.js";var w=D((function(D){var w,C=D.classNames,H=void 0===C?{container:"",overlay:"",modal:""}:C,E=D.id,T=D.show,F=D.title,O=void 0===F?"":F,P=D.description,U=void 0===P?"":P,_=D.onClose,x=void 0===_?h:_,B=D.alertDialog,I=void 0!==B&&B,N=D.children,S=D.triggerElement,k=D.width,z=void 0===k?v.DEFAULT:k,W=D.closeButtonAriaLabel,R=void 0===W?"Close":W,V=D.contentSpacing,Y=void 0!==V&&V,q=D.zIndex,G=void 0===q?1e4:q,J=D["data-testid"],K=a((function(){return N?r.Children.toArray(N):[]}),[N]);g(O,K);var Q=c({id:E,alertDialog:I}),X=o(Q,2),Z=X[0],$=X[1],oo=l((function(){I||null==x||x()}),[I,x]);f({instance:Z}),p({instance:Z,show:T,triggerElement:S,onClose:x,alertDialog:I});var to=a((function(){var o=$.title.id,t=K.find(j);return t?n(t,{id:o,closeModal:x}):e(u,{title:O,description:U,closeModal:x,id:o,closeButtonAriaLabel:R})}),[$.title,K,O,U,x,R]),eo=a((function(){return K.find(y)||e(m,{children:K.filter((function(o){return!j(o)&&!L(o)}))})}),[K]),io=a((function(){return K.find(L)||null}),[K]),ro=z!==v.DEFAULT&&z!==v.FULL_WIDTH,ao=s.createPortal(i("div",Object.assign({},$.container,{className:d(b.container,H.container),"data-testid":J||M(A.MODAL,E),style:{"--monday-modal-z-index":G}},{children:[e("div",{onClick:oo,className:d(b.overlay,H.overlay),"data-testid":A.MODAL_OVERLAY}),i("div",Object.assign({},$.dialog,{className:d(b.dialog,H.modal,(w={},t(w,b.default,z===v.DEFAULT),t(w,b.full,z===v.FULL_WIDTH),t(w,b.spacing,Y),w)),style:{width:ro?z:null}},{children:[to,eo,io]}))]})),document.body);return s.createPortal(ao,document.body)}),{width:v});export{w as default};
