import{slicedToArray as e,defineProperty as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as n,jsxs as i,Fragment as a}from"react/jsx-runtime";import{forwardRef as r,useState as o,useCallback as s}from"react";import d from"classnames";import c from"moment";import"react-dates/initialize";/*rt"react-dates/lib/css/_datepicker.css"*/;import{DayPickerRangeController as u,DayPickerSingleDateController as m}from"react-dates";import l from"./DatePickerHeader/DatePickerHeader.js";import f from"./DateNavigationItem/DateNavigationItem.js";import D from"./YearPicker/YearPicker.js";import{WEEK_FIRST_DAY as v,DAY_SIZE as h}from"./constants.js";import{FocusInput as k,Direction as p}from"./types.js";import{getTestId as y}from"../../tests/testIds.js";import{ComponentDefaultTestId as g}from"../../tests/constants.js";import{NOOP as b}from"../../utils/function-utils.js";import P from"./DatePicker.module.scss.js";var j=r((function(r,j){var O,N=r.id,E=r.className,C=r.firstDayOfWeek,M=void 0===C?v:C,I=r.daySize,S=void 0===I?h:I,W=r.range,Y=void 0!==W&&W,B=r.shouldBlockDay,K=r.shouldBlockYear,R=r.numberOfMonths,x=void 0===R?1:R,A=r.hideNavigationKeys,T=void 0!==A&&A,_=r.date,z=r.endDate,H=r.onPickDate,w=r.enableOutsideDays,F=void 0!==w&&w,V=r.showWeekNumber,L=void 0!==V&&V,q=r.shouldBlockRange,G=r["data-testid"],J=o(k.startDate),Q=e(J,2),U=Q[0],X=Q[1],Z=o(!1),$=e(Z,2),ee=$[0],te=$[1],ne=o(null),ie=e(ne,2),ae=ie[0],re=ie[1],oe=s((function(e){var t=e.month;return n(l,{"data-testid":G||y(g.DATEPICKER_HEADER,N),currentDate:t||c(),isMonthYearSelection:ee,onToggleMonthYearPicker:function(){return te((function(e){return!e}))},hideNavigationKeys:T})}),[G,ee,T,N]),se=s((function(e){var t=0===M?e.clone().add(1,"d").isoWeek():e.isoWeek();return i(a,{children:[n("span",Object.assign({className:P.calendarDayWeekNumber},{children:t}))," ",e.format("D")]})}),[M]),de=s((function(e){re(e),te(!1)}),[]),ce=s((function(){return n(D,{"data-testid":G||y(g.DATEPICKER_YEAR_SELECTION,N),selectedDate:_,isYearBlocked:K,changeCurrentDate:de})}),[G,K,de,_,N]),ue=s((function(e){H(U===k.startDate?Object.assign(Object.assign({},e),{endDate:null}):e)}),[U,H]),me=s((function(e){X(e||k.startDate)}),[]),le=!T&&!ee;return i("div",Object.assign({"data-testid":G||y(g.DATEPICKER,N),ref:j,id:N,className:d(P.datepickerContainer,E,(O={},t(O,P.withWeekNumber,L),t(O,P.rangePickerMode,Y),t(O,P.monthYearSelection,ee),O))},{children:[Y?n(u,{renderDayContents:L?se:void 0,firstDayOfWeek:M,hideKeyboardShortcutsPanel:!0,startDate:_,endDate:z,onDatesChange:ue,focusedInput:U,minimumNights:0,onFocusChange:me,navPrev:le?n(f,{kind:p.prev}):n("div",{}),navNext:le?n(f,{kind:p.next}):n("div",{}),daySize:S,isOutsideRange:q,isDayBlocked:B,renderMonthElement:oe,enableOutsideDays:F||L,numberOfMonths:x,initialVisibleMonth:function(){return ae||_||c()}},"".concat(null==ae?void 0:""+ae)):n(m,{renderDayContents:L?se:void 0,firstDayOfWeek:M,hideKeyboardShortcutsPanel:!0,onFocusChange:b,numberOfMonths:x,date:_,onDateChange:function(e){return H(e)},navPrev:le?n(f,{kind:p.prev}):n("div",{}),navNext:le?n(f,{kind:p.next}):n("div",{}),focused:!0,renderMonthElement:oe,enableOutsideDays:F||L,daySize:S,isDayBlocked:B,initialVisibleMonth:function(){return ae||_||c()}},"".concat(null==ae?void 0:""+ae)),ee&&ce()]}))}));export{j as default};
