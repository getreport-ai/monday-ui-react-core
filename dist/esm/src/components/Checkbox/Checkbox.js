import{jsxs as e,jsx as o}from"react/jsx-runtime";import t from"classnames";import{forwardRef as a,useRef as r,useCallback as s,useEffect as i,useMemo as n}from"react";import{isNil as c,noop as l}from"lodash-es";import m from"../Icon/Icon.js";import d from"../Icon/Icons/components/Check.js";import p from"../Icon/Icons/components/Remove.js";import{backwardCompatibilityForProperties as u}from"../../helpers/backwardCompatibilityForProperties.js";import{useSupportFirefoxLabelClick as f}from"./hooks/useSupportFirefoxLabelClick.js";import b from"../../hooks/useMergeRefs.js";import{getTestId as C}from"../../tests/testIds.js";import{ComponentDefaultTestId as h}from"../../tests/constants.js";import k from"../Text/Text.js";import j from"./Checkbox.module.scss.js";var v=a((function(a,v){var y=a.className,x=a.componentClassName,N=a.checkboxClassName,g=a.labelClassName,I=a.ariaLabel,O=a.label,w=a.ariaLabelledBy,B=a.onChange,E=void 0===B?l:B,F=a.checked,H=a.indeterminate,L=void 0!==H&&H,T=a.disabled,X=void 0!==T&&T,K=a.defaultChecked,S=a.value,A=void 0===S?"":S,R=a.name,q=void 0===R?"":R,M=a.id,_=a["data-testid"],z=r(null),G=r(null),P=b({refs:[v,G]}),U=u([y,x]),V=s((function(){var e=G.current;e&&window.requestAnimationFrame((function(){window.requestAnimationFrame((function(){e.blur()}))}))}),[G]),D=K;c(D)&&c(F)&&(D=!1),i((function(){G.current&&(G.current.indeterminate=L)}),[G,L]);var J=f({inputRef:G}).onClickCapture,Q=n((function(){return I||("string"==typeof O?O:"")}),[I,O]);return e("label",Object.assign({className:t(j.wrapper,U),onMouseUp:V,"data-testid":_||C(h.CHECKBOX,M),htmlFor:M,onClickCapture:J},{children:[o("input",{ref:P,id:M,className:j.input,value:A,name:q,type:"checkbox",onChange:E,defaultChecked:D,disabled:X,"aria-label":Q,"aria-labelledby":w,checked:F}),o("div",Object.assign({className:t(j.checkbox,N),ref:z,"data-testid":C(h.CHECKBOX_CHECKBOX,M)},{children:o(m,{className:j.icon,iconType:m.type.SVG,icon:L?p:d,ignoreFocusStyle:!0,clickable:!1,ariaHidden:!0,iconSize:"16"})})),!1===O?null:o(k,Object.assign({element:"span",type:k.types.TEXT2,className:t(j.label,g),"data-testid":C(h.CHECKBOX_LABEL,M)},{children:O}))]}))}));export{v as default};
