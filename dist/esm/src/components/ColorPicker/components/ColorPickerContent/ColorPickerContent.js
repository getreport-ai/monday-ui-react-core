import{toConsumableArray as o}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as r,jsxs as e}from"react/jsx-runtime";import{difference as t,intersection as i}from"lodash-es";import{forwardRef as l,useCallback as n,useRef as s,useMemo as c}from"react";import{ColorStyle as a,contentColors as d}from"../../../../utils/colors-vars-map.js";import m from"../../../Icon/Icons/components/NoColor.js";import{ColorShapes as u,DEFAULT_NUMBER_OF_COLORS_IN_LINE as f}from"../../ColorPickerConstants.js";import{calculateColorPickerWidth as p}from"../../services/ColorPickerStyleService.js";import{useGridKeyboardNavigationContext as C,GridKeyboardNavigationContext as v}from"../../../GridKeyboardNavigationContext/GridKeyboardNavigationContext.js";import{ColorPickerClearButton as I}from"./ColorPickerClearButton.js";import{ColorPickerColorsGrid as S}from"./ColorPickerColorsGrid.js";import{withStaticProps as h}from"../../../../types/withStaticProps.js";import{BaseSizes as j}from"../../../../constants/sizes.js";var y=h(l((function(l,h){var y=l.className,b=l.onValueChange,k=l.value,O=l.noColorText,g=l.colorStyle,x=void 0===g?a.REGULAR:g,L=l.ColorIndicatorIcon,N=l.SelectedIndicatorIcon,R=l.shouldRenderIndicatorWithoutBackground,B=l.NoColorIcon,P=void 0===B?m:B,E=l.isBlackListMode,M=void 0===E||E,w=l.colorsList,z=l.isMultiselect,T=l.colorSize,G=void 0===T?j.MEDIUM:T,U=l.numberOfColorsInLine,A=void 0===U?f:U,_=l.tooltipContentByColor,K=void 0===_?{}:_,W=l.focusOnMount,D=l.colorShape,H=void 0===D?u.SQUARE:D,Q=l.forceUseRawColorList,V=l.showColorNameTooltip,Y=l.id,q=l["data-testid"],F=n((function(){b(null)}),[b]),J=s(null),X=s(null),Z=c((function(){return Q?w:M?t(d,w):i(d,w)}),[Q,M,w]),$=n((function(r){if(z){var e=o(k);if(e.includes(r)){var t=e.indexOf(r);t>-1&&e.splice(t,1)}else e.push(r);b(e)}else b([r])}),[z,b,k]),oo=c((function(){return[{topElement:J,bottomElement:X}]}),[]),ro=C(oo,h),eo=p(G,A);return r("div",Object.assign({className:y,style:{width:eo},ref:h,tabIndex:-1},{children:e(v.Provider,Object.assign({value:ro},{children:[r(S,{ref:J,onColorClicked:$,colorsToRender:Z,numberOfColorsInLine:A,focusOnMount:W,value:k,colorStyle:x,ColorIndicatorIcon:L,shouldRenderIndicatorWithoutBackground:R,SelectedIndicatorIcon:N,colorSize:G,tooltipContentByColor:K,colorShape:H,showColorNameTooltip:V&&!Q,id:Y,"data-testid":q}),O&&r(I,{Icon:P,onClick:F,text:O,ref:X})]}))}))})),{COLOR_STYLES:a,sizes:j,colorStyles:a,colorSizes:j,colorShapes:u});export{y as default};
