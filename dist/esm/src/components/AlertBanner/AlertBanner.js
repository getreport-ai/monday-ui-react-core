import{defineProperty as e}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsxs as r,jsx as t}from"react/jsx-runtime";import{getStyle as o}from"../../helpers/typesciptCssModulesHelper.js";import n from"classnames";import s,{forwardRef as i,useMemo as a}from"react";import l from"../Button/Button.js";import c from"../Icon/Icon.js";import m from"../Icon/Icons/components/CloseSmall.js";import{AlertBannerBackgroundColor as p}from"./AlertBannerConstants.js";import{NOOP as d}from"../../utils/function-utils.js";import{ComponentDefaultTestId as u}from"../../tests/constants.js";import{getTestId as f}from"../../tests/testIds.js";import{withStaticProps as b}from"../../types/withStaticProps.js";import j from"./AlertBanner.module.scss.js";import A from"../Text/Text.js";import{AlertBannerContext as B}from"./AlertBannerContext.js";var g=i((function(i,p){var b=i.children,N=i.className,C=i.backgroundColor,O=void 0===C?g.backgroundColors.PRIMARY:C,v=i.onClose,I=void 0===v?d:v,R=i.ariaLabel,T=void 0===R?"":R,y=i.isCloseHidden,h=void 0!==y&&y,k=i.id,x=i["data-testid"],E=a((function(){return n(N,j.alertBanner,o(j,O))}),[N,O]),_=O===g.backgroundColors.DARK,L=_?A.colors.ON_INVERTED:A.colors.ON_PRIMARY,P=a((function(){return s.Children.toArray(b).filter((function(e){return!(!e.type.isAlertBannerItem&&"MDXCreateElement"!==e.type.displayName)||(console.error("Alert banner child is not supported. Please use AlertBannerText, AlertBannerLink or AlertBannerButton.",e),!1)})).map((function(e,r){return s.cloneElement(e,Object.assign(Object.assign({},null==e?void 0:e.props),{marginLeft:r>0,isDarkBackground:_}))}))}),[b,_]);return r(A,Object.assign({type:A.types.TEXT2,color:L,ref:p,className:E,role:"banner","aria-label":T||"banner",id:k,"data-testid":x||f(u.ALERT_BANNER,k)},{children:[t(B.Provider,Object.assign({value:{textColor:L}},{children:t("div",Object.assign({className:n(j.content)},{children:P.map((function(r,o){var s=r.type.isAlertBannerText;return t("div",Object.assign({className:n(j.contentItem,e({},j.contentItemText,s))},{children:s?t("div",Object.assign({className:n(j.ellipsis)},{children:r})):r}),o)}))}))})),t("div",Object.assign({className:n(j.closeButtonWrapper)},{children:h?null:t(l,Object.assign({dataTestId:"alert-banner-close-button",className:n(j.closeBtn),onClick:I,size:l.sizes.SMALL,kind:l.kinds.TERTIARY,color:_?l.colors.ON_INVERTED_BACKGROUND:l.colors.ON_PRIMARY_COLOR,ariaLabel:"close-toast"},{children:t(c,{iconType:c.type.SVG,clickable:!1,icon:m,iconSize:"20px",ignoreFocusStyle:!0})}))}))]}))})),N=b(g,{backgroundColors:p});export{N as default};
