import{inherits as o,createSuper as e,createClass as t,classCallCheck as i,assertThisInitialized as n}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as s}from"react/jsx-runtime";import{isFunction as r,camelCase as a}from"lodash-es";import l from"classnames";import{PureComponent as p,isValidElement as d}from"react";import h from"../Dialog/Dialog.js";import{DialogPosition as g}from"../../constants/positions.js";import{TooltipArrowPosition as T,TooltipTheme as m}from"./TooltipConstants.js";import{getStyle as u}from"../../helpers/typesciptCssModulesHelper.js";import w from"./Tooltip.module.scss.js";import{getTestId as c,ComponentDefaultTestId as y}from"../../tests/testIds.js";import{AnimationType as f,HideShowEvent as S,JustifyType as D}from"../../constants/dialog.js";var v={lastTooltipHideTS:null,openTooltipsCount:0},C=function(g){o(m,p);var T=e(m);function m(o){var e;return i(this,m),(e=T.call(this,o)).renderTooltipContent=e.renderTooltipContent.bind(n(e)),e.getShowDelay=e.getShowDelay.bind(n(e)),e.onTooltipShow=e.onTooltipShow.bind(n(e)),e.onTooltipHide=e.onTooltipHide.bind(n(e)),e.wasShown=!1,e}return t(m,[{key:"getContainer",value:function(){return document.getElementById("tooltips-container")||document.querySelector("body")}},{key:"renderTooltipContent",value:function(){var o,e=this.props,t=e.theme,i=e.content,n=e.paddingSize,p=e.className,h=e.style;return i?(r(i)?o=i():(d(i)||"string"==typeof i&&i)&&(o=i),o?s("div",Object.assign({style:h,className:l(w.tooltip,u(w,a(t)),u(w,a("padding-size-"+n)),p)},{children:o})):null):null}},{key:"onTooltipShow",value:function(){if(!this.wasShown){var o=this.props.onTooltipShow;v.openTooltipsCount++,this.wasShown=!0,o&&o()}}},{key:"onTooltipHide",value:function(){if(this.wasShown){var o=this.props.onTooltipHide;v.lastTooltipHideTS=Date.now(),v.openTooltipsCount--,this.wasShown=!1,o&&o()}}},{key:"getTimeSinceLastTooltip",value:function(){return v.openTooltipsCount>0?0:v.lastTooltipHideTS?Date.now()-v.lastTooltipHideTS:1/0}},{key:"getShowDelay",value:function(){var o=this.props,e=o.showDelay,t=o.immediateShowDelay,i=this.getTimeSinceLastTooltip();return(0===t||t)&&1500>i?{showDelay:t,preventAnimation:!0}:{showDelay:e,preventAnimation:!1}}},{key:"render",value:function(){var o=this.props,e=o.moveBy,t=o.justify,i=o.children,n=o.getContainer,r=o.theme,p=o.paddingSize,d=o.tip,g=o.showTrigger,T=o.hideTrigger,m=o.showOnDialogEnter,S=o.addKeyboardHideShowTriggersByDefault,D=o.open,v=o.arrowClassName,C=o.id,j=o["data-testid"];if(!i)return null;if(o.withoutDialog)return this.renderTooltipContent();var E=this.renderTooltipContent,H=Object.assign(Object.assign({},this.props),{"data-testid":j||c(y.TOOLTIP,C),open:D,startingEdge:t,tooltip:d,content:E,getContainer:n||this.getContainer,moveBy:e,tooltipClassName:l(w.arrow,u(w,r),u(w,a("padding-size-"+p)),v),animationType:f.EXPAND,onDialogDidHide:this.onTooltipHide,onDialogDidShow:this.onTooltipShow,getDynamicShowDelay:this.getShowDelay,showTrigger:g,hideTrigger:T,showOnDialogEnter:m,addKeyboardHideShowTriggersByDefault:S});return s(h,Object.assign({},H,{children:i}))}}]),m}();C.positions=g,C.hideShowTriggers=S,C.themes=m,C.animationTypes=f,C.justifyTypes=D,C.arrowPositions=T,C.defaultProps={arrowPosition:T.CENTER,moveBy:{main:4,secondary:0},theme:m.Dark,position:C.positions.TOP,justify:C.justifyTypes.CENTER,hideDelay:0,showDelay:300,disableDialogSlide:!0,animationType:f.EXPAND,withoutDialog:!1,containerSelector:"#tooltips-container",tip:!0,hideWhenReferenceHidden:!1,modifiers:[],showTrigger:C.hideShowTriggers.MOUSE_ENTER,hideTrigger:C.hideShowTriggers.MOUSE_LEAVE,showOnDialogEnter:!1,referenceWrapperClassName:"",addKeyboardHideShowTriggersByDefault:!1,open:!1};export{C as default};
