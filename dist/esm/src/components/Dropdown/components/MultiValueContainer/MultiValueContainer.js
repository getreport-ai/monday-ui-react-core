import{objectWithoutProperties as e,slicedToArray as t,defineProperty as n,extends as o}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import l,{useState as i,useCallback as r}from"react";import{components as a}from"react-select";import s from"classnames";import{useHiddenOptionsData as c}from"../../hooks/useHiddenOptionsData.js";import u from"../../../Counter/Counter.js";import p from"../../../Dialog/Dialog.js";import m from"../../../DialogContentContainer/DialogContentContainer.js";import d from"../../../Chips/Chips.js";import{DROPDOWN_CHIP_COLORS as h}from"../../dropdown-constants.js";import f from"./MultiValueContainer.module.scss.js";var v=["children","selectProps"];function g(g){var C=g.children,E=g.selectProps,w=e(g,v),D=E.isDisabled,P=E.placeholder,b=E.inputValue,j=E.selectProps,I=void 0===j?{}:j,N=E.withMandatoryDefaultOptions,O=E.readOnly,S=I.selectedOptions,k=I.onSelectedDelete,y=I.setIsDialogShown,M=I.isDialogShown,T=I.isMultiline,A=I.popupsContainerSelector,x=C[1],V=i(),L=t(V,2),_=L[0],B=L[1],F=0===S.length&&!b,H=f["chip-with-input-wrapper"],K=s(T?f["multiselect-chip-multi-line"]:f["multiselect-chip-single-line"],n({},f["multiselect-chip-disabled"],D)),R=c({isMultiline:T,ref:_,chipClassName:K,chipWrapperClassName:H,selectedOptionsCount:S.length}),W=R.overflowIndex,U=R.hiddenOptionsCount,Y=U>0,q=r((function(e){k(e.value,{action:"remove-value",removedValue:e})}),[k]),z=r((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.length;return S.map((function(n,o){var i=Object.keys(h).includes(n.chipColor)?d.colors[n.chipColor]:d.colors.PRIMARY;return o>=e&&t>o?l.createElement(d,{dataTestId:"value-container-chip",key:n.value,className:K,noAnimation:!0,disabled:D,id:n.value,label:n.label,onDelete:function(){return q(n)},disableClickableBehavior:!0,onMouseDown:function(e){e.stopPropagation()},readOnly:O||N&&n.isMandatory,allowTextSelection:O,leftAvatar:n.leftAvatar,leftIcon:n.leftIcon,color:i}):null}))}),[S,K,D,O,N,q]);return l.createElement(a.ValueContainer,o({selectProps:E},w),l.createElement("div",{className:f["value-container"]},F&&l.createElement("div",{className:f["placeholder-container"]},l.createElement(a.Placeholder,w,P)),l.createElement("div",{className:s(f["value-container-chips"],n({},f["without-placeholder"],!F)),ref:function(e){return B(e)},"data-testid":"value-container-chips"},Y?l.createElement(l.Fragment,null,z(0,W-1),l.createElement("div",{className:H},z(W-1,W),x),z(W)):l.createElement(l.Fragment,null,z(0,S.length-1),l.createElement("div",{className:H},z(S.length-1),x))),l.createElement("div",null,Y&&l.createElement(p,{content:function(){return l.createElement(m,{className:f["value-container-dialog-content"]},z(W))},containerSelector:A,tooltip:!0,showTrigger:p.hideShowTriggers.CLICK,hideTrigger:p.hideShowTriggers.CLICK_OUTSIDE,open:M,onClick:function(){return y(!0)},onClickOutside:function(){return y(!1)}},l.createElement(u,{kind:u.kinds.LINE,prefix:"+",count:U,onMouseDown:function(e){e.stopPropagation()},noAnimation:!0})))))}export{g as default};
