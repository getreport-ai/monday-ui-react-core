import{slicedToArray as o,defineProperty as e}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as s,jsxs as i}from"react/jsx-runtime";import{forwardRef as r,useRef as t,useMemo as a,useCallback as l}from"react";import n from"classnames";import c from"../Icon/Icon.js";import m from"../../hooks/useMergeRefs.js";import d from"../Icon/Icons/components/CloseSmall.js";import{getCSSVar as p}from"../../services/themes.js";import{ElementAllowedColor as u,getElementColor as f}from"../../utils/colors-vars-map.js";import v from"../Avatar/Avatar.js";import b from"../IconButton/IconButton.js";import j from"../Tooltip/Tooltip.js";import h from"../Text/Text.js";import{getTestId as g,ComponentDefaultTestId as T}from"../../tests/test-ids-utils.js";import{AvatarType as O}from"../Avatar/AvatarConstants.js";import{withStaticProps as C}from"../../types/withStaticProps.js";import I from"../../hooks/useHover/useHover.js";import N from"../../hooks/useSetFocus/index.js";import k from"../../hooks/useClickableProps/useClickableProps.js";import y from"../../hooks/useIsOverflowing/useIsOverflowing.js";import w from"./hooks/useChipOverflowTooltip.js";import S from"./Chips.module.scss.js";var A=r((function(r,u){var C,P,R=r.className,x=r.avatarClassName,M=r.iconClassName,z=r.id,B=r.label,F=void 0===B?"":B,H=r.leftIcon,_=void 0===H?null:H,D=r.rightIcon,X=void 0===D?null:D,E=r.leftAvatar,L=void 0===E?null:E,G=r.rightAvatar,Y=void 0===G?null:G,U=r.disabled,q=void 0!==U&&U,J=r.readOnly,K=void 0!==J&&J,Q=r.allowTextSelection,V=void 0!==Q&&Q,W=r.color,Z=void 0===W?A.colors.PRIMARY:W,$=r.iconSize,oo=void 0===$?16:$,eo=r.onDelete,so=void 0===eo?function(o,e){}:eo,io=r.onMouseDown,ro=r.onClick,to=r.noAnimation,ao=void 0===to||to,lo=r.ariaLabel,no=r.disableClickableBehavior,co=void 0!==no&&no,mo=r.leftAvatarType,po=void 0===mo?O.IMG:mo,uo=r.rightAvatarType,fo=void 0===uo?O.IMG:uo,vo=r.showBorder,bo=void 0!==vo&&vo,jo=r.leftRenderer,ho=r.rightRenderer,go=r.dataTestId||g(T.CHIP,z),To=!(!ro&&!io||co),Oo=!K&&!q,Co=lo||F,Io=t(null),No=t(null),ko=t(null),yo=I(),wo=o(yo,2),So=wo[0],Ao=wo[1],Po=N({ref:ko}).isFocused,Ro=y({ref:No}),xo=m({refs:[u,ko,So]}),Mo=n(S.chips,R,(e(C={},S.disabled,q),e(C,S.withClose,Oo),e(C,S.noAnimation,ao),e(C,S.withUserSelect,V),e(C,S.border,bo),C)),zo=n(S.clickable,Mo,(e(P={},S.disabled,q),e(P,S.disableTextSelection,!V),P)),Bo=w({isOverflowing:Ro,wrapperClassName:Mo,clickableClassName:zo,label:F}),Fo=a((function(){return{backgroundColor:q?p("disabled-background-color"):To&&(Ao||Po)?f(Z,!0,!0):f(Z,!0)}}),[q,To,Ao,Po,Z]),Ho=l((function(o){o.stopPropagation(),so&&so(z,o)}),[z,so]),_o=l((function(o){void 0!==ro&&o.target!==Io.current&&(o.preventDefault(),ro(o))}),[ro]),Do=k({onClick:_o,onMouseDown:io,disabled:q,id:z,dataTestId:go,ariaLabel:Co,ariaHidden:!1,ariaHasPopup:!1,ariaExpanded:!1},xo),Xo=To?Object.assign(Object.assign({},Do),{className:zo,style:Fo}):Object.assign(Object.assign({className:Mo},Bo.wrapperProps),{"aria-label":Co,style:Fo,ref:xo,onClick:_o,onMouseDown:io,id:z,"data-testid":go}),Eo=po===O.TEXT?{text:L}:{src:L},Lo=po===O.TEXT?{text:Y}:{src:Y};return s(j,Object.assign({},Bo.tooltipProps,{children:i(h,Object.assign({type:h.types.TEXT2},Xo,{children:[L?s(v,Object.assign({withoutBorder:!0,className:n(S.avatar,S.left,x),customSize:18,type:po},Eo),z):null,_?s(c,{className:n(S.icon,S.left,M),iconType:c.type.ICON_FONT,clickable:!1,icon:_,iconSize:oo,ignoreFocusStyle:!0}):null,jo&&s("div",Object.assign({className:n(S.customRenderer,S.left)},{children:jo})),s("div",Object.assign({className:S.label,ref:No},{children:F})),X?s(c,{className:n(S.icon,S.right,M),iconType:c.type.ICON_FONT,clickable:!1,icon:X,iconSize:oo,ignoreFocusStyle:!0}):null,Y?s(v,Object.assign({withoutBorder:!0,className:n(S.avatar,S.right,x),customSize:16,type:fo},Lo),z):null,ho&&s("div",Object.assign({className:n(S.customRenderer,S.right)},{children:ho})),Oo&&s(b,{size:b.sizes.XXS,color:b.colors.ON_PRIMARY_COLOR,className:n(S.icon,S.close),ariaLabel:"Remove",hideTooltip:!0,icon:d,onClick:Ho,dataTestId:"".concat(go,"-close"),ref:Io})]}))}))})),P=C(A,{colors:u,avatarTypes:O});export{P as default};
