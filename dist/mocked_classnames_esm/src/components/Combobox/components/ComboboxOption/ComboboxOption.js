import{defineProperty as o}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import{jsxs as e,Fragment as i,jsx as t}from"react/jsx-runtime";import n from"classnames";import{useRef as r,useEffect as l,useCallback as s,useMemo as c}from"react";import a from"../../../Icon/Icon.js";import p from"../../../Tooltip/Tooltip.js";import m from"../../../../hooks/useIsOverflowing/useIsOverflowing.js";import{keyCodes as f}from"../../../../constants/keyCodes.js";import{getOptionId as u}from"../../helpers.js";import{withStaticProps as d}from"../../../../types/withStaticProps.js";import{ComboboxOptionIconType as v}from"../ComboboxConstants.js";import{getTestId as b,ComponentDefaultTestId as O}from"../../../../tests/testIds.js";import h from"./ComboboxOption.module.scss.js";var j=d((function(d){var j,y=d.index,I=d.option,g=d.className,T=d.isActive,C=d.visualFocus,N=d.scrollRef,k=d.scrollOffset,E=void 0===k?100:k,x=d.onOptionClick,R=d.onOptionLeave,S=d.onOptionHover,w=d.optionLineHeight,L=d.shouldScrollWhenActive,P=void 0===L||L,_=d.optionRenderer,A=void 0===_?null:_,B=I.id,F=I.leftIcon,H=I.leftIconType,M=I.rightIcon,z=I.rightIconType,D=I.label,K=I.iconSize,V=void 0===K?16:K,W=I.disabled,X=I.selected,q=I.ariaLabel,G=I.belongToCategory,J=void 0!==G&&G,Q=I.tooltipContent,U=r(null),Y=r(),Z=m({ref:Y});l((function(){var o,e=U.current;C&&e&&P&&((null==N?void 0:N.current)&&e?N.current.scrollTop=e.offsetTop-E:null===(o=null==e?void 0:e.scrollIntoView)||void 0===o||o.call(e,{behaviour:"smooth"}))}),[U,C,P,N,E,J]);var $=function(o,e,i){return e===v.RENDERER?o(n(h.optionIcon,i)):t(a,{className:n(h.optionIcon,i),iconType:a.type.ICON_FONT,clickable:!1,icon:o,iconSize:V,ignoreFocusStyle:!0})},oo=s((function(o){x(o,y,I,!0)}),[y,I,x]),eo=s((function(o){W||R(o,y,I,!0)}),[y,I,R,W]),io=s((function(o){W||S(o,y,I,!0)}),[y,I,S,W]),to=s((function(o){o.key!==f.ENTER&&o.key!==f.SPACE||x(o,y,I,!1)}),[x,y,I]);Q||(Q=Z?D:null);var no=c((function(){return A&&A(I)}),[A,I]),ro=e(i,{children:[F&&$(F,H,h.left),t("div",Object.assign({ref:Y,className:n(h.optionLabel)},{children:D})),M&&$(M,z,"")]});return t(p,Object.assign({content:Q},{children:t("div",Object.assign({ref:U,"aria-level":J?2:1,"aria-selected":T,"aria-label":q||D,id:u(B,y),"data-testid":b(O.COMBOBOX_OPTION,y),onMouseEnter:io,onClick:oo,onKeyDown:to,onMouseLeave:eo,className:n(h.comboboxOption,g,(j={},o(j,h.disabled,W),o(j,h.selected,X),o(j,h.active,T),o(j,h.activeOutline,C),j)),style:{height:w}},{children:no||ro}),B||D)}))}),{iconTypes:v});export{j as default};
