import{slicedToArray as e,toConsumableArray as t,defineProperty as i}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import{jsxs as n,jsx as o,Fragment as s}from"react/jsx-runtime";import{camelCase as a}from"lodash-es";import{getStyle as r}from"../../../../helpers/typesciptCssModulesHelper.js";import{getTestId as c,ComponentDefaultTestId as l}from"../../../../tests/testIds.js";import d from"classnames";import{keyCodes as p}from"../../../../constants/keyCodes.js";import{useState as m,useRef as u,useCallback as f,useEffect as v,useMemo as b}from"react";import{SwitchTransition as _,CSSTransition as y}from"react-transition-group";import j from"../../../../hooks/useKeyEvent/index.js";import x from"../../../Icon/Icon.js";import I from"../../../Icon/Icons/components/Check.js";import N from"../../../Divider/Divider.js";import{NOOP as C}from"../../../../utils/function-utils.js";import h from"../../../HiddenText/HiddenText.js";import S from"../../../Clickable/Clickable.js";import{StepStatus as T,MultiStepType as E,Size as g}from"../../MultiStepConstants.js";import k from"./StepIndicator.module.scss.js";import{IconType as A}from"../../../Icon/IconConstants.js";var O=[p.ENTER,p.SPACE],D=function(e){var t=e.fulfilledStepIcon,i=e.fulfilledStepIconType;return e.status!==T.FULFILLED||e.isFulfilledStepDisplayNumber?o(s,{children:e.stepNumber}):o(x,{icon:t,className:d(k.numberContainerTextCheckIcon),iconLabel:T.FULFILLED,iconType:i,ignoreFocusStyle:!0,clickable:!1,ariaHidden:!0})},L=function(s){var p,x=s.stepComponentClassName,L=s.stepNumber,F=void 0===L?1:L,P=s.status,w=void 0===P?T.PENDING:P,R=s.titleText,H=void 0===R?"Title text":R,M=s.subtitleText,G=void 0===M?"Subtitle text":M,U=s.type,V=void 0===U?E.PRIMARY:U,z=s.fulfilledStepIcon,B=void 0===z?I:z,K=s.fulfilledStepIconType,Y=void 0===K?A.SVG:K,q=s.isFulfilledStepDisplayNumber,J=void 0!==q&&q,Q=s.onClick,W=void 0===Q?C:Q,X=s.isFollowedByDivider,Z=void 0!==X&&X,$=s.stepDividerClassName,ee=s.isVertical,te=void 0!==ee&&ee,ie=s.id,ne=s.size,oe=void 0===ne?g.REGULAR:ne,se=s["data-testid"],ae=m(!1),re=e(ae,2),ce=re[0],le=re[1],de=u(null),pe=u(w),me=f((function(){le(!0)}),[le]),ue=f((function(){le(!1)}),[le]),fe=f((function(){return pe.current!==w}),[pe,w]),ve=f((function(){W&&W(F)}),[W,F]);j({eventName:"animationend",callback:ue,ref:de}),j({keys:O,callback:ve,ref:de}),v((function(){fe()&&me()}),[w,fe,me]),v((function(){pe.current=w}),[w]);var be=b((function(){return"Step ".concat(F,": ").concat(H," - ").concat(G,", status: ").concat(w)}),[w,H,F,G]),_e=function(e){return[r(k,a(e||"indicator")),r(k,a("type-".concat(V).concat(e))),r(k,a("status-".concat(w).concat(e))),r(k,a("size-".concat(oe).concat(e)))]};return n(S,Object.assign({tabIndex:"-1",elementType:"li",className:d.apply(void 0,t(_e("")).concat([x,(p={},i(p,k.withAnimation,ce),i(p,k.clickable,W),i(p,k.textPlacementVertical,te),p)])),"aria-label":be,onClick:ve,dataTestId:se||c(l.STEP_INDICATOR,ie)},{children:[n("div",Object.assign({className:d.apply(void 0,t(_e("__number-divider-container")))},{children:[o("div",Object.assign({className:d.apply(void 0,t(_e("__number-container"))),ref:de,tabIndex:0,role:"button"},{children:o(_,Object.assign({mode:"out-in"},{children:o(y,Object.assign({classNames:{enter:k.swapEnter,enterActive:k.swapEnterActive,exit:k.swapExit,exitActive:k.swapExitActive},addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)}},{children:o("span",Object.assign({className:d.apply(void 0,t(_e("__number-container__text")))},{children:o(D,{fulfilledStepIcon:B,fulfilledStepIconType:Y,isFulfilledStepDisplayNumber:J,stepNumber:F,status:w})}))}),w)}))})),Z&&te&&o(N,{className:d(k.divider,$)})]})),n("div",Object.assign({className:d.apply(void 0,t(_e("__text-container")))},{children:[n("div",Object.assign({className:d.apply(void 0,t(_e("__text-container__title")))},{children:[o(h,{text:w})," ",o("span",Object.assign({className:d.apply(void 0,t(_e("__text-container__title__text")))},{children:H}))]})),oe!==g.COMPACT?o("span",Object.assign({className:d.apply(void 0,t(_e("__text-container__subtitle__text")))},{children:G})):null]}))]}))};export{L as default};
